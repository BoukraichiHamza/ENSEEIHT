<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <meta http-equiv="CONTENT-TYPE" content="text/html;
      charset=windows-1252">
    <title></title>
    <meta name="GENERATOR" content="OpenOffice.org 1.1.4 (Win32)">
    <meta name="CREATED" content="20051027;135681">
    <meta name="CHANGEDBY" content="Daniel Hagimont">
    <meta name="CHANGED" content="20051106;19023960">
    <meta name="ProgId" content="FrontPage.Editor.Document">
    <meta name="Originator" content="Microsoft Word 10">
    <meta name="Template" content="C:\PROGRAM FILES\MICROSOFT
      OFFICE\OFFICE\html.dot">
    <!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:Zoom>95</w:Zoom>
  <w:GrammarState>Clean</w:GrammarState>
  <w:HyphenationZone>21</w:HyphenationZone>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Tableau Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman"}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]--><!--[if gte mso 9]>
<xml><o:shapedefaults v:ext="edit" spidmax="1027"/>
</xml><![endif]--><!--[if gte vml 1]><v:shapetype id="_x0000_t75"
 coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe"
 filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_s1025" type="#_x0000_t75" style='width:172.5pt;
 height:114pt'>
 <v:imagedata src="TP1_fichiers/image001.gif" o:title="logo_inpg"/>
</v:shape><![endif]-->
    <style>
	<!--
		P { color: #000000 }
		A:link { color: #0000ff }
		A:visited { color: #800080 }
	-->
	</style>
  </head>
  <body dir="ltr" lang="fr-FR" link="#0000ff" text="#000000"
    vlink="#800080">
    <p align="center"><br>
      <b><font style="font-size: 20pt;" size="5">Cours Intergiciels<br>
        </font></b></p>
    <p align="center"><font style="font-size: 20pt;" size="5"><b>ENSEEIHT






          – Département Informatique – 2ième année</b></font></p>
    <p align="center"><font style="font-size: 20pt;" size="5"><b>TP web
          services<br>
        </b></font></p>
    <p style="margin-bottom: 0cm;" align="center"><font size="3">Daniel
        Hagimont</font></p>
    <p style="margin-bottom: 0cm;" align="center"><font size="3">Daniel.Hagimont@enseeiht.fr</font></p>
    <p align="center"><br>
    </p>
    <p style="margin-left: 1.27cm;">L'objectif de ce TP est l'initiation
      à l'utilisation des Web services. Nous allons créer un Web Service
      et le tester, puis consommer un Web Service existant sur Internet,
      et enfin implanter un Web Service plus complexe qui utilise un
      autre Web service.<br>
    </p>
    <p style="margin-left: 1.27cm;">
      <title></title>
      <meta name="GENERATOR" content="LibreOffice 3.5 (Linux)">
      <style type="text/css">
	<!--
		@page { margin: 2cm }
		P { margin-bottom: 0.21cm }
	-->
	</style> </p>
    <blockquote>
      <p style="margin-bottom: 0cm"><u><b>Créer un WS et le tester</b></u><br>
      </p>
    </blockquote>
    <blockquote>
      <p style="margin-bottom: 0cm">Sous eclipse (version JEE)<br>
      </p>
    </blockquote>
    <blockquote>
      <p style="margin-bottom: 0cm"><u>Créez un Web Service</u><br>
      </p>
    </blockquote>
    <p></p>
    <blockquote>
      <ul>
        <li>créez un Dynamic Web Project (WSCalc)</li>
        <ul>
          <li>n'oubliez pas de l'associer à un Target Runtime (Tomcat)<br>
          </li>
        </ul>
        <li>créez une classe (Calculatrice)<br>
        </li>
      </ul>
    </blockquote>
    <blockquote>
      <blockquote>
        <blockquote>package n7;<br>
          public class Calculatrice {<br>
          &nbsp;&nbsp;&nbsp; public int add (int i, int j) {<br>
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; return i+j;<br>
          &nbsp;&nbsp;&nbsp; }<br>
          }<br>
        </blockquote>
      </blockquote>
    </blockquote>
    <blockquote>
      <ul>
        <li>sur la classe : click-droit -&gt; Web Services -&gt; Create
          Web Service</li>
      </ul>
    </blockquote>
    <p style="margin-left: 1.27cm;"><u>Testez rapidement votre Web
        Service</u></p>
    <blockquote>
      <ul>
        <li>créez un Dynamic Web Project (WSCalcClient1)</li>
        <li>copiez dans ce projet le fichier WSDL qui a été généré dans
          le projet WSCalc (dans le répertoire WebContent/wsdl)</li>
        <li>sur le fichier WSDL : click droit -&gt; Web Services -&gt;
          Generate Client (choisissez l'option TestClient avec le
          curseur)</li>
        <li>Eclipse a alors généré une application Web permettant de
          tester votre Web Service</li>
      </ul>
    </blockquote>
    <p style="margin-left: 1.27cm;"><u>Tester votre Web Service avec un
        client en Java</u><br>
    </p>
    <blockquote>
      <ul>
        <li>créez un Java Project (WSCalcClient2)</li>
        <li>copiez dans ce projet le fichier WSDL qui a été généré dans
          le projet WSCalc (dans le répertoire WebContent/wsdl)</li>
        <li>sur le fichier WSDL : click droit -&gt; Web Services -&gt;
          Generate Client (choisissez l'option DevelopClient avec le
          curseur)</li>
        <li>Eclipse a alors généré les stubs permettant d'appeler votre
          Web Service</li>
        <li>créez une petite classe de test<br>
        </li>
      </ul>
    </blockquote>
    <blockquote>
      <blockquote>&nbsp;&nbsp;&nbsp; public class Invoker {<br>
        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; public static void
        main(String[] args) {<br>
        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
        CalculatriceService service = new CalculatriceServiceLocator();<br>
        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; try {<br>
        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp; Calculatrice c = service.getCalculatrice();<br>
        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp; System.out.println(" 7+8="+c.add(7,8));<br>
        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; } catch
        (Exception e) {<br>
        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp; e.printStackTrace();<br>
        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>
        &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br>
        &nbsp;&nbsp;&nbsp; }<br>
        <br>
      </blockquote>
    </blockquote>
    <p style="margin-left: 1.27cm;"><b><u>Implanter une application
          complète</u></b><br>
    </p>
    <blockquote>
      <blockquote>
        <blockquote> </blockquote>
      </blockquote>
      <ul>
        <li>on vous donne les fichier WSDL de deux services :</li>
        <ul>
          <li>un qui permet de récupérer le zip code d'une ville aux US
            à partir de son nom et état (par exemple San Francisco /
            California =&gt; 94101)</li>
          <li>un qui permet à partir de deux zip codes de retourne la
            distance entre les 2 villes</li>
        </ul>
        <li>vous devez implanter un Web Service qui permet de retourne
          la distance entre deux villes à partir de leur nom et état</li>
        <ul>
          <li>ce Web Service utilise bien évidemment les deux précédents<br>
          </li>
        </ul>
      </ul>
    </blockquote>
  </body>
</html>
